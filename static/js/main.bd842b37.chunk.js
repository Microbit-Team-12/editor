(this.webpackJsonpeditor=this.webpackJsonpeditor||[]).push([[0],{172:function(e,t){},174:function(e,t){},185:function(e,t,n){},187:function(e){e.exports=JSON.parse('{"Intro":{"speech":"Quack! Tell me more about the problem by selecting a button below:","buttons":[{"text":"An error message is displayed","link":"Select error message","params":[]},{"text":"My code doesn\'t do what I want it to do","link":"Select the problem with your program","params":[]}]},"Select error message":{"speech":"What type of error is displayed?","buttons":[{"text":"AttributeError","link":"AttributeError explanation","params":[]},{"text":"SyntaxError","link":"SyntaxError explanation","params":[]},{"text":"TypeError","link":"TypeError explanation","params":[]},{"text":"NameError","link":"NameError explanation","params":[]},{"text":"IndentationError / TabError","link":"IndentationError explanation","params":[]},{"text":"Something else / I don\'t know","link":"Less common errors","params":[]}]},"AttributeError explanation":{"speech":"An AttributeError tells you that a certain type (such as int or str) doesn\u2019t have a certain attribute. For instance, if you write display.potato, Python will give an AttributeError to tell you that display has no potato attribute.","buttons":[{"text":"Tell me more","link":"More about AttributeError","params":[]}]},"More about AttributeError":{"speech":"To get an AttributeError, you might have accidentally used the wrong datatype or misspelt the function you called? Or perhaps you used a capital letter by mistake \u2013 Python treats show and Show as two different things.","buttons":[{"text":"Ah, that\'s it!","link":"Goodbye","params":[]},{"text":"I still need help","link":"Highlight error","params":[]},{"text":"back","link":"AttributeError explanation","params":[]}]},"Goodbye":{"speech":"I\u2019m happy that I could help you! Now you\u2019ve learnt something new, so you\u2019ll know what to do next time you get that problem.\\n\\nRemember you can click on my icon any time if you need more help!","buttons":[{"text":"Thanks Duck, bye for now!","link":null,"params":[]}]},"Ask if following tutorial":{"speech":"That\'s alright. Are you following one of the MicroPython tutorials?","buttons":[{"text":"Yes I am","link":"Tutorial selection","params":[]},{"text":"No I am not","link":"Duck gives up","params":[]}]},"Tutorial selection":{"speech":"Which tutorial are you following?","buttons":[{"text":"None of them","link":"Duck gives up","params":[]},{"text":"Hello, World!","link":"Compare with tutorial","params":["HelloWorld"]},{"text":"Simple Buttons","link":"Compare with tutorial","params":["SimpleButtons"]}]},"Compare with tutorial":{"speech":"{get_readable_diff}","buttons":[{"text":"Thanks, I can fix that now.","link":"Goodbye","params":[]},{"text":"That wasn\'t what I was trying to write","link":"Duck gives up","params":[]}]},"Duck gives up":{"speech":"This seems strange... Perhaps you would have better luck reading the tutorial about errors?\\nHere is the link: {link_to_tutorial_about_errors}","buttons":[]},"SyntaxError explanation":{"speech":"A SyntaxError might happen if you used the wrong punctuation (eg: using \u2018;\u2019 instead of \u2018:\u2019) or if you misspelt a keyword (such as for, while, if, or else).","buttons":[{"text":"Ah, that\'s it!","link":"Goodbye","params":[]},{"text":"No, I still need help","link":"More about SyntaxError","params":[]}]},"More about SyntaxError":{"speech":"Sometimes a helpful message appears with a SyntaxError, such as \u201ccan\u2019t assign to literal\u201d. Which message do you see?","buttons":[{"text":"Invalid Syntax (no further message)","link":"Invalid Syntax nfm explanation","params":[]},{"text":"Invalid Syntax for (number/integer with base 10)","link":"Invalid Syntax number explanation","params":[]},{"text":"Can\'t assign to [something]","link":"Invalid Syntax can\'t assign explanation","params":[]},{"text":"Something else","link":"Highlight error","params":[]}]},"Invalid Syntax nfm explanation":{"speech":"You might get this error if you write an \u201cempty\u201d for loop or while loop (one with nothing in it because you didn\u2019t indent), or if you forgot to close the square brackets at the end of a list.","buttons":[{"text":"Ah, that\'s it!","link":"Goodbye","params":[]},{"text":"No, I still need help","link":"Highlight error","params":[]}]},"Highlight error":{"speech":"Your error message tells you that the {error_message.error_type} is on line {error_message.get_line_no_and_highlight()}, so I\u2019ve highlighted that line for you in the editor. Do you spot the mistake now?","buttons":[{"text":"Thanks, thank you!","link":"Goodbye","params":[]},{"text":"No, I still need help","link":"Ask if following tutorial","params":[]}]},"Invalid Syntax number explanation":{"speech":"Python gives this message when you attach something confusing to the end of a number. Eg: Python knows about 3, but it doesn\u2019t know about 3f or 3.f. If you are trying to multiply a number by a variable, use the * symbol. Or maybe you just made a typo.","buttons":[{"text":"Ah, that\'s it!","link":"Goodbye","params":[]},{"text":"I still need help","link":"Highlight error","params":[]}]},"Invalid Syntax can\'t assign explanation":{"speech":"Python complains that it \u201ccan\u2019t assign to expression\u201d if you use the single equals sign ( = ) in a place where it doesn\u2019t belong. For example, \u201c3 = x\u201d would be read as \u201cchange the value of 3 to make it x. But that\u2019s nonsense because you can\u2019t change 3!","buttons":[{"text":"Tell me more...","link":"More about assignment error","params":[]}]},"More about assignment error":{"speech":"If you\u2019re trying to change the value of a variable, the variable name (eg: x) needs to go on the left, and the value (eg: \u201chello\u201d, or 10) needs to go on the right of the = sign.\\nIf you\u2019re trying to test if 2 values are equal, use == rather than = .","buttons":[{"text":"Ah, that\'s it!","link":"Goodbye","params":[]},{"text":"I still need help","link":"Highlight error","params":[]},{"text":"back","link":"Invalid Syntax can\'t assign explanation","params":[]}]},"TypeError explanation":{"speech":"Python throws a TypeError if you use a value in a way that doesn\u2019t make sense for its type. For instance, \u201c3\u201d + 5 would throw a TypeError because you cannot add a str to an int.","buttons":[{"text":"Ah, that\'s it!","link":"Goodbye","params":[]},{"text":"I still need help","link":"Highlight error","params":[]}]},"NameError explanation":{"speech":"A NameError tells you that Python doesn\u2019t understand a certain word that you used. Reread the error message to see which word this is. It might just be that you\u2019ve mistyped it! Remember that Python is case-sensitive (so you mustn\u2019t use a capital letter where it expects a lower-case one).","buttons":[{"text":"Ah, that\'s it!","link":"Goodbye","params":[]},{"text":"I still need help","link":"Highlight error","params":[]}]},"IndentationError explanation":{"speech":"The indentation is a fancy way of saying the amount of space at the beginning of the line. Within a given loop, all lines must have the same indentation. You should always use tabs rather than spaces for this.","buttons":[{"text":"Ah, that\'s it!","link":"Goodbye","params":[]}]},"Select the problem with your program":{"speech":"Select the problem with your program","buttons":[{"text":"My program does nothing at all","link":"Program does nothing","params":[]},{"text":"A condition isn\'t working (eg: in if statement or while loop)","link":"Condition isn\'t working","params":[]},{"text":"Certain parts of my program are skipped","link":"Certain parts skipped","params":[]},{"text":"A list has changed even though I didn\'t change it","link":"List has changed","params":[]},{"text":"Something else","link":"Duck gives up","params":[]}]},"Program does nothing":{"speech":"If your program does nothing at all but doesn\u2019t show an error, it might be because you defined a function and forgot to call the function. To call a function, you need round brackets ().","buttons":[{"text":"Ah, that\'s it!","link":"Goodbye","params":[]},{"text":"No, that\'s not what I\'ve dome","link":"More about program does nothing","params":[]}]},"More about program does nothing":{"speech":"Another reason why your program might do nothing is if you forgot to output anything! Assigning to variables doesn\u2019t show anything on the Micro:Bit display unless you also call display.show. Do not call print because it doesn\u2019t work on the Micro:Bit.","buttons":[{"text":"Ah, that\'s it!","link":"Goodbye","params":[]},{"text":"I still need help","link":"Duck gives up","params":[]}]},"Condition isn\'t working":{"speech":"You\u2019ve told me that a condition isn\u2019t working. Is your condition simple (just uses one comparison) or complex (uses and / or ) ?","buttons":[{"text":"Simple","link":"Simple condition","params":[]},{"text":"Complex","link":"Complex condition","params":[]}]},"Simple condition":{"speech":"If two values should compare equal but they don\u2019t, it might be because they\u2019re different types. For example, 3 is an int but \u201c3\u201d is a string, so Python considers them to be totally different things and won\u2019t consider them equal.","buttons":[{"text":"Ah, that\'s it!","link":"Goodbye","params":[]},{"text":"I still need help","link":"Duck gives up","params":[]}]},"Complex condition":{"speech":"When using complex conditions, Python groups and before or. For instance, \u201ca or b and c\u201c is interpreted as \u201ca or (b and c)\u201d. If this isn\u2019t what you want, then insert parentheses (round brackets).","buttons":[{"text":"Ah, that\'s it!","link":"Goodbye","params":[]},{"text":"I still need help","link":"Simple condition","params":[]}]},"Certain parts skipped":{"speech":"Which of the following match your issue?","buttons":[{"text":"My list should be modified by every iteration of the loop but it\u2019s only modified by the last iteration","link":"List outside loop","params":[]},{"text":"The last iteration of my loop is getting skipped","link":"Last iter skipped","params":[]},{"text":"Something else","link":"Narrow down decision","params":[]}]},"List outside loop":{"speech":"This error happens if you have defined the list inside the loop. Move the definition of the list to before the loop begins, and that should fix your problem!","buttons":[{"text":"Ah, that\'s it!","link":"Goodbye","params":[]},{"text":"I still need help","link":"Duck gives up","params":[]}]},"Last iter skipped":{"speech":"The range function in Python stops before the end value. For instance, range(1,10) will iterate through values 1-9 but miss out 10. Increase the end parameter in your call to range, and see if that fixes the problem.","buttons":[{"text":"Ah, that\'s it!","link":"Goodbye","params":[]},{"text":"I still need help","link":"Duck gives up","params":[]}]},"Narrow down decision":{"speech":"Try narrowing down exactly where your program \u201cmakes the decision\u201d that skips a certain part of the code, by inserting display.show() calls (with different parameters!) after every line.","buttons":[{"text":"Ah, that\'s it!","link":"Goodbye","params":[]},{"text":"I still need help","link":"Duck gives up","params":[]}]},"List has changed":{"speech":"If you define a list in Python and then set a second list equal to the first, then any changes to the first list will happen in the second! Fix this by using the copy function on the first list. For example, instead of typing \u201clist2 = list1\u201d, type \u201clist2 = list1.copy()\u201d    ","buttons":[{"text":"Ah, that\'s it!","link":"Goodbye","params":[]},{"text":"I still need help","link":"Duck gives up","params":[]}]},"Division has given the wrong answer":{"speech":"If you divide two ints (whole numbers) in Python, it rounds the answer down to a whole number, instead of giving it as a decimal or fraction. If you want a decimal answer, write \u201c.0\u201d at the end of your numbers. Eg: type 3.0/4.0 instead of 3/4.","buttons":[{"text":"Ah, that\'s it!","link":"Goodbye","params":[]},{"text":"I still need help","link":"Duck gives up","params":[]}]},"Less common errors":{"speech":"Do any of these match your error?","buttons":[{"text":"IndexError","link":"IndexError explanation","params":[]},{"text":"ImportError","link":"ImportError explanation","params":[]},{"text":"KeyError","link":"KeyError explanation","params":[]},{"text":"ValueError","link":"ValueError explanation","params":[]},{"text":"ZeroDivisionError","link":"ZeroDivisionError explanation","params":[]},{"text":"None of them / I don\'t know","link":"Highlight error"}]},"IndexError explanation":{"speech":"The word \\"index\\" means \\"position in a list\\", so an IndexError means that you are trying to access a position in a list that\'s after the end of the list! For example, if you try to get the 3rd item from a list with only 2 items, Python won\'t understand that. Remember that lists start at 0, so a list of length 3 will only have indexes 0,1, and 2.","buttons":[{"text":"Ah, that\'s it!","link":"Goodbye","params":[]},{"text":"I still need help","link":"Highlight error","params":[]}]},"ImportError explanation":{"speech":"An ImportError normally means that you have misspelled a module that you\'re trying to import. For instance, check that you have spelt \'Microbit\' correctly (and with a capital M!) in your \'import\' statment.","buttons":[{"text":"Ah, that\'s it!","link":"Goodbye","params":[]},{"text":"I still need help","link":"Highlight error","params":[]}]},"KeyError explanation":{"speech":"A KeyError means that you are trying to access a value in a dictionary from a key that doesn\'t yet exist! This might be because you have misspelt the key, or because you forgot to add something to the dictionary before accessing it.","buttons":[{"text":"Ah, that\'s it!","link":"Goodbye","params":[]},{"text":"I still need help","link":"Highlight error","params":[]}]},"ValueError explanation":{"speech":"A ValueError happens if you call a function with the wrong argument (parameter). Read the error message that comes with the error, to see why your argument doesn\'t work here.","buttons":[{"text":"Ah, that\'s it!","link":"Goodbye","params":[]},{"text":"I still need help","link":"Highlight error","params":[]}]},"ZeroDivisionError explanation":{"speech":"The rules of maths don\'t allow you to divide by zero, but a ZeroDivisionError means that you are accidentally trying to divide something by zero!","buttons":[{"text":"Ah, that\'s it!","link":"Goodbye","params":[]},{"text":"I still need help","link":"Highlight error","params":[]}]}}')},189:function(e,t,n){},263:function(e,t,n){},509:function(e,t,n){},510:function(e,t,n){"use strict";n.r(t);var r,a=n(0),i=n.n(a),o=n(35),s=n.n(o),c=n(3),u=n.n(c),l=n(5),h=n(7),p=n(8),d=n(18),f=n(17),m=n(539),b=n(533),g=n(92);!function(e){e[e.Free=0]="Free",e[e.Busy=1]="Busy"}(r||(r={}));var x=n(132),y=n(133),k={connectOption:{baudRate:115200,dataBits:8,stopBits:1,parity:"none",bufferSize:4096,flowControl:"none"},requestOption:{filters:[{usbVendorId:3368}]},readOption:{showLog:!0,updateMs:50,cutLength:1e3},signalOption:{showLog:!0,replLineReady:">>> ",executionDone:"Execute Done: 0x3f3f3f3f",executionStart:"Execution Start: 0x3f3f3f3f",mainPYException:'Traceback (most recent call last):\r\n  File "main.py", line ',execException:'Traceback (most recent call last):\r\n  File "<stdin>", line 1, in <module>\r\n  File "<string>", line ',waitMsBeforeReboot:1}},v=n(66),w=n.n(v),j=function(){function e(t,n){Object(h.a)(this,e),this.portReader=void 0,this.signal=void 0,this.startSignals=void 0,this.endSignals=void 0,this.portReader=t,this.signal=n,this.startSignals=[n.executionStart+"\r\n",n.mainPYException,n.execException],this.endSignals=[n.executionDone+"\r\n",n.executionStart+"\r\n",n.mainPYException,n.execException]}return Object(p.a)(e,[{key:"readUntilNewREPLLine",value:function(){return this.portReader.safeReadUntil(this.signal.replLineReady)}},{key:"readUntilExecStart",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Waiting for Execution Start"),e.next=3,this.portReader.safeReadUntilWithUpdate(this.startSignals,(function(e){return null}));case 3:if(0===e.sent){e.next=9;break}return this.readErrors(t),e.abrupt("return",!1);case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readUntilExecDone",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Execution Start"),n=1;case 2:if(1!==n){e.next=9;break}return e.next=5,this.portReader.safeReadUntilWithUpdate(this.endSignals,(function(e){return t.write({kind:"NormalOutput",outputChunk:e})}));case 5:1===(n=e.sent)&&t.write({kind:"ResetPressed"}),e.next=2;break;case 9:0!==n?this.readErrors(t):t.end(),console.log("Execution done");case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readErrors",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r,a,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Execution Error"),e.next=3,this.portReader.unsafeReadline();case 3:n=e.sent,r=n.split(",",2)[0],a=0,i="";case 7:if(0!==a&&!i.startsWith("  ")){e.next=14;break}return e.next=10,this.portReader.unsafeReadline();case 10:i=e.sent,a+=1,e.next=7;break;case 14:o=i.split(": "),t.write({kind:"ErrorMessage",line:parseInt(r)-1,type:o[0],message:1===o.length?"":o[1]}),t.end();case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),O=function(){function e(t,n){Object(h.a)(this,e),this.serialBuffer="",this.portReader=void 0,this.config=void 0,this.portReader=t,this.config=n}return Object(p.a)(e,[{key:"readLoop",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.config.showLog&&console.log(this.serialBuffer);case 1:if(t(this.serialBuffer)){e.next=10;break}return e.next=4,this.portReader.read();case 4:n=e.sent,r=n.value,this.serialBuffer+=r,this.config.showLog&&console.log(this.serialBuffer),e.next=1;break;case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readLoopWithCut",value:function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.config.showLog&&console.log(this.serialBuffer);case 1:if(t(this.serialBuffer)){e.next=12;break}return(r=this.serialBuffer.length)>=n&&(this.serialBuffer=this.serialBuffer.substring(r-n)),e.next=6,this.portReader.read();case 6:a=e.sent,i=a.value,this.serialBuffer+=i,this.config.showLog&&console.log(this.serialBuffer),e.next=1;break;case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"splitBufferOnFirst",value:function(e){var t=this.serialBuffer.indexOf(e),n=this.serialBuffer.substr(0,t);return this.serialBuffer=this.serialBuffer.substr(t+e.length),n}},{key:"unsafeReadline",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="\r\n",e.next=3,this.readLoop((function(e){return e.includes(t)}));case 3:return e.abrupt("return",this.splitBufferOnFirst(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"safeReadUntil",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.readLoopWithCut((function(e){return e.includes(t)}),t.length);case 2:this.splitBufferOnFirst(t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"safeReadUntilWithUpdate",value:function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a,i,o,s=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!1,a=-1,i=function(e){return r=!0,t.forEach((function(t,n){e.includes(t)&&(a=n)})),-1!==a},o=setInterval((function(){r&&(n(s.serialBuffer),r=!1)}),this.config.updateMs),e.next=6,this.readLoopWithCut(i,this.config.cutLength);case 6:return clearInterval(o),n(this.splitBufferOnFirst(t[a])),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),E=function(){function e(t,n){if(Object(h.a)(this,e),this.port=void 0,this.portWriter=void 0,this.portReader=void 0,this.portParser=void 0,this.signal=void 0,this.state=void 0,this.portWriterStreamClosed=null,this.portReaderStreamClosed=null,this.port=t,this.signal=n.signalOption,this.state=r.Free,null!=t.writable){var a=new TextEncoderStream;this.portWriterStreamClosed=a.readable.pipeTo(t.writable).catch((function(e){console.log("disconnected in pipe")})),this.portWriter=a.writable.getWriter()}if(null!=t.readable){var i=new TextDecoderStream;this.portReaderStreamClosed=t.readable.pipeTo(i.writable).catch((function(e){console.log("disconnected in pipe")})),this.portReader=i.readable.getReader();var o=new O(this.portReader,n.readOption);this.portParser=new j(o,n.signalOption)}}return Object(p.a)(e,[{key:"getState",value:function(){return this.state}},{key:"codeToPythonString",value:function(e){return("print('"+this.signal.executionStart+"')\r\n"+e+"\r\nprint('"+this.signal.executionDone+"')").replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/\r?\n/g,"\\r\\n")}},{key:"getREPLLine",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.portWriter.write("\x03");case 2:return e.next=4,this.portParser.readUntilNewREPLLine();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"flash",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a,i=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state!==r.Busy){e.next=2;break}throw Error("Flash Failed: Device not free");case 2:return this.state=r.Busy,n=this.codeToPythonString(t),a=new w.a,e.next=7,this.getREPLLine();case 7:return e.next=9,this.portWriter.write("file=open('main.py','w');s='"+n+"';file.write(s);file.close();\r");case 9:return e.next=11,this.portParser.readUntilExecStart(a);case 11:if(!e.sent){e.next=15;break}this.portParser.readUntilExecDone(a).then((function(){i.state=r.Free})).catch((function(){a.end()})),e.next=16;break;case 15:this.state=r.Free;case 16:return e.abrupt("return",a);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"execute",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a,i=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state!==r.Busy){e.next=2;break}throw Error("Execute Failed: Device not free");case 2:return this.state=r.Busy,n=this.codeToPythonString(t),a=new w.a,e.next=7,this.getREPLLine();case 7:return e.next=9,this.portWriter.write("s='"+n+"';exec(s)\r");case 9:return e.next=11,this.portParser.readUntilExecStart(a);case 11:if(!e.sent){e.next=15;break}this.portParser.readUntilExecDone(a).then((function(){i.state=r.Free})).catch((function(){a.end()})),e.next=16;break;case 15:this.state=r.Free;case 16:return e.abrupt("return",a);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reboot",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state!==r.Busy){e.next=2;break}throw Error("Reboot Failed: Device not free");case 2:return this.state=r.Busy,e.next=5,this.getREPLLine();case 5:return e.next=7,this.portWriter.write("from microbit import *;reset()\r");case 7:return t=new w.a,e.next=10,this.portParser.readUntilExecStart(t);case 10:if(!e.sent){e.next=14;break}this.portParser.readUntilExecDone(t).then((function(){n.state=r.Free})).catch((function(){t.end()})),e.next=15;break;case 14:this.state=r.Free;case 15:return e.abrupt("return",t);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"waitUntil",value:function(e){return new Promise((function(t,n){var r=setInterval((function(){e()&&(clearInterval(r),t())}),200)}))}},{key:"interrupt",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state!==r.Free){e.next=2;break}throw Error("Interupt Failed: Device not running code");case 2:return e.next=4,this.portWriter.write("\x03");case 4:return e.next=6,this.waitUntil((function(){return t.state===r.Free}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Disconnection initiated:"),e.next=3,this.portReader.cancel("App will unmount");case 3:return e.next=5,this.portReaderStreamClosed;case 5:return console.log("Reader closed;"),e.next=8,this.portWriter.abort("App will unmount");case 8:return e.next=10,this.portWriterStreamClosed;case 10:return console.log("Writer closed."),e.next=13,this.port.close();case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function S(e,t){return I.apply(this,arguments)}function I(){return(I=Object(l.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.open(n.connectOption);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",{kind:"ConnectionFailure",type:"Failed to Open Port",reason:e.t0.message});case 8:return r=new E(t,n),e.abrupt("return",{kind:"MicrobitConnection",interact:r,disconnection:new Promise((function(e,n){t.addEventListener("disconnect",(function n(r){console.log("disconnected"),t.removeEventListener("disconnect",n),e()}))}))});case 10:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function R(){return C.apply(this,arguments)}function C(){return(C=Object(l.a)(u.a.mark((function e(){var t,n,r=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:k,e.prev=1,e.next=4,navigator.serial.requestPort(t.requestOption);case 4:n=e.sent,e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",{kind:"ConnectionFailure",type:"Failed to Obtain Port",reason:e.t0.message});case 10:return e.abrupt("return",S(n,t));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function D(){return P.apply(this,arguments)}function P(){return(P=Object(l.a)(u.a.mark((function e(){var t,n,r=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:k,e.next=3,navigator.serial.getPorts();case 3:if(1!==(n=e.sent).length){e.next=8;break}return e.abrupt("return",S(n[0],t));case 8:if(0!==n.length){e.next=12;break}return e.abrupt("return",{kind:"ConnectionFailure",type:"Failed to Obtain Port",reason:"No Paired Serial Devices Available"});case 12:return e.abrupt("return",{kind:"ConnectionFailure",type:"Failed to Obtain Port",reason:"Multiple Paired Serial Devices Available"});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return L.apply(this,arguments)}function L(){return(L=Object(l.a)(u.a.mark((function e(){var t,n,r=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e,t){if(void 0===t)return!0;var n,r=Object(x.a)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if((void 0===a.usbProductId||a.usbProductId===e.usbProductId)&&(void 0===a.usbVendorId||a.usbVendorId===e.usbVendorId))return!0}}catch(i){r.e(i)}finally{r.f()}return!1},t=r.length>0&&void 0!==r[0]?r[0]:k,e.abrupt("return",new Promise((function(e,r){var a=function(){var r=Object(l.a)(u.a.mark((function r(i){var o;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o=i.port||i.target,n(o.getInfo(),t.requestOption.filters)&&(navigator.serial.removeEventListener("connect",a),e(S(o,t)));case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();navigator.serial.addEventListener("connect",a)})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=n(19),N=n(530),B=n(531),T=n(144),W=n(529),M=n(532),_=n(145),U=n(22),G=n.p+"static/media/Duck.d495e477.jpg",H=(n(185),n(4)),q=Object(T.a)({palette:{primary:{main:"#ffcc00"}}}),V=Object(W.a)((function(e){return{button:{flexGrow:1,border:1,borderRadius:3,color:"black",height:48,padding:e.spacing(2),margin:8,textAlign:"center",textTransform:"none"},xButton:{color:"white",backgroundColor:"#ff0000",height:20,padding:e.spacing(2),textAlign:"center"},speech:{flexGrow:1,border:1,borderRadius:3,color:"black",padding:e.spacing(2),margin:8,textAlign:"left"}}})),Y=[],z=n(187),K=Object.keys(z),J={HelloWorld:'from microbit import *\ndisplay.scroll("Hello, World!")',SimpleButtons:"from microbit import *\nimport music\n\nwhile True:\n    if button_a.is_pressed():\n        display.show(Image.MUSIC_QUAVER)\n        music.play(music.NYAN)\n    if button_b.is_pressed():\n        display.show(Image.MEH)\n        music.play(music.POWER_DOWN)\n\n    display.show(Image.COW)"};function Z(e,t){return"link_to_tutorial_about_errors"===e?Object(H.jsx)("a",{href:"https://example.com/faq.html",target:"_blank",rel:"noreferrer",children:"Tutorial about errors"}):"get_readable_diff"===e?function(e){if(e.lineNumber&&e.lineText){var t=e.lineText.trim(),n=J[Y[0]].split("\n").map((function(e){return e.trim()})),r=new _.a(n,{includeMatches:!0,isCaseSensitive:!0}).search(t);if(r.length>0){var a=r[0];return Object(H.jsxs)("div",{children:["The closest matching line in the tutorial is line",a.refIndex," which reads:",Object(H.jsx)(N.a,{color:"secondary",variant:"h6",children:a.item}),"whereas your line reads:",Object(H.jsx)(N.a,{color:"secondary",variant:"h6",children:t})]})}return"Unfortunately, your line does not look like any of the lines in the tutorial."}return"I cannot see your error message. Perhaps press 'RUN CODE' again, and double check that an error message is visible?"}(t):e}function Q(e,t){return e.split(/(\{[\S\s]+?\})/g).filter(Boolean).map((function(e){return function(e,t){var n=e;return e.startsWith("{")&&(n=Z(e.slice(1,-1),t)),n}(e,t)}))}function X(e){return function(e,t){var n=V(),r=Object(a.useState)(e),i=Object(F.a)(r,2),o=i[0],s=i[1];return Object(H.jsxs)(U.c,{height:600,width:600,children:[Object(H.jsx)("div",{children:Object(H.jsx)("img",{src:G,height:600,width:600,alt:"cartoon duck"})}),Object(H.jsx)(U.d,{size:60}),Object(H.jsxs)(U.b,{children:[Object(H.jsx)(U.f,{size:20}),Object(H.jsx)(U.b,{children:Object(H.jsxs)(U.b,{children:[Object(H.jsx)(N.a,{className:n.speech,children:Q(z[o].speech,t)}),Object(H.jsx)(B.a,{container:!0,justify:"center",alignItems:"flex-start",spacing:2,children:z[o].buttons.map((function(e){return Object(H.jsx)("div",{children:Object(H.jsx)(B.a,{item:!0,xs:!0,children:Object(H.jsx)(M.a,{theme:q,children:Object(H.jsx)(b.a,{className:n.button,variant:"contained",color:"primary",onClick:function(){e.link?(Y=e.params,s(e.link)):t.closeDuck()},children:e.text})})})},e.text)}))})]})}),Object(H.jsx)(U.a,{size:200})]}),Object(H.jsx)(U.e,{size:250,children:Object(H.jsx)(U.e,{size:65,children:Object(H.jsx)(b.a,{className:n.xButton,variant:"contained",onClick:function(){t.closeDuck()},children:"X"})})})]})}(K[0],e)}n(189);var $=n(60),ee=n(139),te=n.n(ee),ne=(n(263),n(540)),re=n(534),ae=n(536),ie=n(537),oe=n(538),se=n(535),ce=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r;if(Object(h.a)(this,n),(r=t.call(this,e)).isExpandable=void 0,r.highlightStart=void 0,r.highlightEnd=void 0,r.lines=void 0,r.state={isExpanded:!1,output:""},r.isExpandable=!1,r.lines=r.props.code.split("\n"),r.highlightStart=0,r.highlightEnd=r.lines.length,r.lines.length>0){var a=r.lines[0].split("# LINES ");if(2===a.length){var i=a[1].split("-"),o=parseInt(i[0]),s=parseInt(i[1]);isNaN(o)||isNaN(s)||(r.highlightStart=o-1,r.highlightEnd=s-1+1,r.isExpandable=!0)}}return r}return Object(p.a)(n,[{key:"onExpand",value:function(){this.setState({isExpanded:!this.state.isExpanded})}},{key:"onRun",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.props.onRun){e.next=6;break}return e.next=3,this.props.onRun(this.props.code);case 3:return t=e.sent,e.next=6,t.forEach((function(e){switch(e.kind){case"NormalOutput":n.setState({output:e.outputChunk});break;case"ErrorMessage":if("KeyboardInterrupt"===e.type)break;var t=n.state.output;n.setState({output:"".concat(t,"\nError on line ").concat(e.line,":\n").concat(e.type,": ").concat(e.message)})}}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onLoad",value:function(){this.props.onLoad(this.lines.slice(this.highlightStart,this.highlightEnd).join("\n"))}},{key:"render",value:function(){var e=this.state.isExpanded?[0,this.lines.length]:[this.highlightStart,this.highlightEnd],t=Object(F.a)(e,2),n=t[0],r=t[1];return Object(H.jsxs)("div",{className:"Docs-code",children:[Object(H.jsx)(ne.a,{style:re.a,language:"py",showLineNumbers:this.state.isExpanded,children:this.lines.slice(n,r).join("\n")}),Object(H.jsx)(se.a,{onClick:this.onExpand.bind(this),disabled:!this.isExpandable,children:Object(H.jsx)(ae.a,{})}),Object(H.jsx)(se.a,{onClick:this.onRun.bind(this),disabled:!this.props.hasFreeConnection(),children:Object(H.jsx)(ie.a,{})}),Object(H.jsx)(se.a,{onClick:this.onLoad.bind(this),children:Object(H.jsx)(oe.a,{})}),Object(H.jsx)("div",{className:"Docs-output",children:this.state.output})]})}}]),n}(i.a.Component),ue=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).renderers={code:e.renderCode.bind(Object($.a)(e))},e}return Object(p.a)(n,[{key:"renderCode",value:function(e){return"py"===e.language?Object(H.jsx)(ce,{code:e.value,onRun:this.props.onRun,onLoad:this.props.onLoad,hasFreeConnection:this.props.hasFreeConnection}):Object(H.jsx)(ne.a,{style:re.a,language:e.language,children:e.value})}},{key:"render",value:function(){return Object(H.jsx)(te.a,{className:"APIDemo-docs",renderers:this.renderers,children:this.props.markdown})}}]),n}(i.a.Component),le=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).state={docs:"# Title\n\nDid you know you can use tildes instead of backticks?\n\n~~~py\n# LINES 6-9\nfrom microbit import *\nimport music\n\nwhile True:\n    if button_a.is_pressed():\n        print('A')\n        display.show(Image.MUSIC_QUAVER)\n        music.play(music.NYAN)\n    if button_b.is_pressed():\n        print('B')\n        display.show(Image.MEH)\n        music.play(music.POWER_DOWN)\n    \n    display.show(Image.COW)\n~~~\n\nMore text\n",output:"",connection:null,editor:null,needDuck:!1,errorString:"",errorLine:0},"serial"in navigator||"usb"in navigator&&(navigator.serial=y.serial,1)||alert("Browser not supported"),g.b.init().then((function(e){console.log(e)})),r}return Object(p.a)(n,[{key:"componentWillUnmount",value:function(){var e;null===(e=this.state.connection)||void 0===e||e.interact.disconnect()}},{key:"renderStartButton",value:function(){return Object(H.jsx)(m.a,{paddingLeft:2,children:Object(H.jsx)(b.a,{className:"APIDemo-button",variant:"contained",disabled:null!==this.state.connection,onClick:this.onStart.bind(this),children:"Start"})})}},{key:"renderButtonRequiringConnection",value:function(e,t,n){return Object(H.jsx)(m.a,{paddingLeft:2,children:Object(H.jsx)(b.a,{className:"APIDemo-button",variant:"contained",disabled:!n,onClick:function(){return t()},children:e})})}},{key:"hasFreeConnection",value:function(){var e;return(null===(e=this.state.connection)||void 0===e?void 0:e.interact.getState())===r.Free}},{key:"hasBusyConnection",value:function(){var e;return(null===(e=this.state.connection)||void 0===e?void 0:e.interact.getState())===r.Busy}},{key:"renderDuck",value:function(){return""!==this.state.errorString?Object(H.jsx)(X,{closeDuck:this.exileDuck.bind(this),lineNumber:this.state.errorLine,lineText:this.state.editor.getValue().split("\n")[this.state.errorLine-1]}):Object(H.jsx)(X,{closeDuck:this.exileDuck.bind(this)})}},{key:"renderTutorialOrDuck",value:function(){return this.state.needDuck?Object(H.jsxs)("div",{children:[Object(H.jsx)("h1",{children:this.state.errorString}),this.renderDuck()]}):Object(H.jsx)(ue,{markdown:this.state.docs,onRun:this.onRunCell.bind(this),hasFreeConnection:this.hasFreeConnection.bind(this),onLoad:this.onLoad.bind(this)})}},{key:"handleEditorDidMount",value:function(e,t){this.setState({editor:e})}},{key:"render",value:function(){var e=this;return Object(H.jsxs)("div",{className:"APIDemo",children:[Object(H.jsxs)("header",{className:"APIDemo-header",children:[this.renderStartButton(),this.renderButtonRequiringConnection("Flash",(function(){return e.onFlash(e.state.editor.getValue())}),this.hasFreeConnection()),this.renderButtonRequiringConnection("Run",(function(){return e.onRun(e.state.editor.getValue())}),this.hasFreeConnection()),this.renderButtonRequiringConnection("Interrupt",this.onInterrupt.bind(this),this.hasBusyConnection()),this.renderButtonRequiringConnection("Reboot",this.onReboot.bind(this),this.hasFreeConnection()),this.renderButtonRequiringConnection("Help",this.summonDuck.bind(this),!1)]}),Object(H.jsxs)("div",{className:"APIDemo-textareas",children:[this.renderTutorialOrDuck(),Object(H.jsx)(g.a,{defaultLanguage:"python",defaultValue:"from microbit import *\nimport music\n\nwhile True:\n    if accelerometer.was_gesture('shake'):\n        display.show(Image.CONFUSED)\n        sleep(1500)\n    if accelerometer.was_gesture('face up'):\n        display.show(Image.HAPPY)\n    if accelerometer.was_gesture('left'):\n        display.show('<')\n        music.play(music.JUMP_UP)\n    if accelerometer.was_gesture('right'):\n        display.show('>')\n        music.play(music.JUMP_DOWN)\n",onMount:this.handleEditorDidMount.bind(this),theme:"light",options:{minimap:{enabled:!1},fontSize:18},wrapperClassName:"APIDemo-code"}),Object(H.jsx)("textarea",{value:this.state.output,readOnly:!0,className:"APIDemo-output"})]})]})}},{key:"connect",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,e.t0=n.kind,e.next="ConnectionFailure"===e.t0?6:"MicrobitConnection"===e.t0?8:11;break;case 6:return alert(n.reason),e.abrupt("return",!1);case 8:return this.setState({connection:n}),n.disconnection.then(Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:alert("Serial disconnected"),r.setState({connection:null},Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.connect(A());case 2:alert("Serial reconnected");case 3:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)})))),e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onLoad",value:function(e){var t,n=this.state.editor;if(null!=n){var r=n.getSelection();if(null!=r){var a=r.getPosition(),i={startLineNumber:a.lineNumber,endLineNumber:a.lineNumber,startColumn:a.column,endColumn:a.column};null===(t=n.getModel())||void 0===t||t.pushEditOperations([r],[{range:i,text:e}],(function(e){return null})),n.focus()}else alert("selection is null")}else alert("Editor is not loaded")}},{key:"summonDuck",value:function(){this.setState({needDuck:!0})}},{key:"exileDuck",value:function(){this.setState({needDuck:!1})}},{key:"onStart",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connect(D());case 2:if(e.sent){e.next=5;break}return e.next=5,this.connect(R());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExec",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.forEach((function(e){switch(e.kind){case"NormalOutput":n.setState({output:e.outputChunk,errorString:""});break;case"ResetPressed":console.log("ResetPressed");break;case"ErrorMessage":"KeyboardInterrupt"!==e.type&&(console.log(e.message),n.setState({errorString:"Error on line "+e.line+":\n"+e.type+": "+e.message,errorLine:e.line}),n.exileDuck(),n.summonDuck())}}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onFlash",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onFlash"),e.t0=this,e.next=4,this.state.connection.interact.flash(t);case 4:return e.t1=e.sent,e.next=7,e.t0.onExec.call(e.t0,e.t1);case 7:this.setState({});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onRun",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onRun"),e.t0=this,e.next=4,this.state.connection.interact.execute(t);case 4:return e.t1=e.sent,e.next=7,e.t0.onExec.call(e.t0,e.t1);case 7:this.setState({});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onRunCell",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onRunCell"),this.setState({}),e.next=4,this.state.connection.interact.execute(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onReboot",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onReboot"),e.t0=this,e.next=4,this.state.connection.interact.reboot();case 4:return e.t1=e.sent,e.next=7,e.t0.onExec.call(e.t0,e.t1);case 7:this.setState({});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onInterrupt",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.state.connection.interact.interrupt();case 2:this.setState({});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(i.a.Component);n(509);s.a.render(Object(H.jsx)(i.a.StrictMode,{children:Object(H.jsx)(le,{})}),document.getElementById("root"))}},[[510,1,2]]]);
//# sourceMappingURL=main.bd842b37.chunk.js.map